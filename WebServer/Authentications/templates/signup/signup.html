<!DOCTYPE html>
<html>
	<head>
		<!-- Standard Meta -->
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">


<!-- bootstrap
<script src="js/bootstrap.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">-->

<!-- Site Properties -->
		<title>Sign Up </title>
        {% load staticfiles %}
		<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.9/components/reset.css">
		<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.9/components/site.css">

		<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.9/components/container.css">
		<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.9/components/grid.css">
		<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.9/components/header.css">
		<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.9/components/image.css">
		<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.9/components/menu.css">

		<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.9/components/divider.css">
		<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.9/components/segment.css">
		<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.9/components/form.css">
		<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.9/components/input.css">
		<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.9/components/button.css">
		<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.9/components/list.css">
		<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.9/components/message.css">
		<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.9/components/icon.css">

		<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<!--		<script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.9/components/form.js"></script>-->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.9/components/transition.js"></script>
{#		<link rel="stylesheet" type="text/css" href="semantic/dist/semantic.min.css">#}
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
		<script src="https://cdn.jsdelivr.net/jquery.validation/1.16.0/jquery.validate.min.js"></script>
		<style type="text/css">
			body {
		      	background: url(" {% static 'signup_files/images/IMAGE BIG blur.jpg' %}") no-repeat;
				background-size: cover;

    		}
	  		.try{ 
    			width: 100%;
    			height: 100%; 
    		}	  
   	 		.grid {
      			height: 100%;
    		}

    		.column {
      			max-width: 450px;
    		}
		</style>

	</head>
	<body >

		<div class="try">
			<div class="ui middle aligned center aligned grid">
				<div class="column">
					<h2 class="ui black header">
						<i class="fa fa-2x fa-user-plus" aria-hidden="true"></i>
						<div>
							Sign up
						</div>
					</h2>
{#					<form action="http://127.0.0.1:8000/auth/register/" method="post" class="ui large form" id="reg_form" name="registration">#}
{#                        {% csrf_token %}#}
						<div class="ui stacked segment">
							<div class="field">
								<div class="two fields">
									<div class="field ui left icon input">
										<i class="add user icon"></i>
										<input type="text" name="first_name" id="first_name" placeholder="First Name">
									</div>
									<div class="field ui left icon input">
										<i class="add user icon"></i>
										<input type="text" name="last_name" id="last_name" placeholder="Last Name">
									</div>
								</div>
								<div class="field">
									<div class="ui left icon input">
										<i class="mail icon"></i>
										<input type="text" name="email" id="email" placeholder="email">
									</div>
								</div>
								

								<div class="field">
									<div class="two fields">
										<div class="field ui left icon input">
											<i class="street view icon"></i>
											<input type="text" name="username" id="username" placeholder="User ID">
										</div>
										<div class="field ui left icon input">
										<!--	<div class="ui left icon input">-->
											<i class="lock icon"></i>
											<input type="password" name="password" id="password" placeholder="Password">

										</div>
									</div>
								</div>
							      
							</div>
							<div class="field">
								<div class="three fields">
									<div id="cancel_btn" class="field">
										<button class="ui inverted green button red circular ">
											Cancel
										</button>
									</div>
									<div class="field">
										<button id="reset_btn" class="ui inverted gray button blue circular">
											Reset
										</button>
									</div>
									<div class="field">
										<button id="form_submit" class="ui inverted green button circular">Submit</button>
									</div>
								</div>
							</div>
						</div>
						<div class="ui error message"></div>
{#					</form>#}
					<div class="ui message">
						Already a user? <a id="login_link" href="#"> login</a>
					</div>
				</div>
			</div>
		</div>
{#        <script src="{% static 'signup_files/js/validetta.min.js' %}"></script>#}
		<script>
		$(document).ready(function() {

            $('#reset_btn').on('click', function () {
            });

            $('#form_submit').on('click', function (E) {
                E.preventDefault();
                var $u = $('#username').val();
                var $p = $('#password').val();
                var $f = $('#first_name').val();
                var $l = $('#last_name').val();
                var $e = $('#email').val();
                $.ajax({
                    url: "http://127.0.0.1:8000/auth/register/",
                    type: "POST",
                    async: false,
                    data: {
                        username: $u,
                        password: $p,
                        email: $e,
                        first_name: $f,
                        last_name: $l,
                    },
                    fail: function(data) {
                        console.log("fail");
                        console.log(data);
                    },

                }).done(function (data) {
                    console.log(data);
                    $.ajax({
                        async: false,
                        type: 'POST',
                        url: 'http://127.0.0.1:8000/auth/login/',
                        dataType: 'json',
                        mimeType: 'application/json',
                        data: {
                            username: $u,
                            password: $p
                        },

                        success: function (data) {
{#                            json=$.parseJSON(data);#}
                            localStorage.setItem("token",data.auth_token);
		                    var token=' Token '+localStorage.getItem("token");
                            location.href="http://127.0.0.1:8000/"+$u+"/setprofile/";
                        }
                    });
                });

            });

            $('#cancel_btn').on('click', function () {
                window.location.href = window.location.href.substr(0, window.location.href.indexOf("signup"));
            });
        });

		
	</script>
	
	</body>

	
	
</html>